nFLAME=input().split()
noList,noModulo=int(nFLAME[0]),int(nFLAME[1])
tl=[]
for i in range(noList):
    listElements=input().split()[1:]
    lE=list(list(map(int,listElements)))
    tl.append(lE) 

mol=[]
for i in range(
    tl:
    mol.append(max(i))
for i in tl:
    mol.append(max(i))
a=0
for i in mol:
    a+=i**2
print(a%noModulo)
